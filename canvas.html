<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF8">
<title>Utils</title>

<script Language="JavaScript">

function draw()
{
  var canvas = document.getElementById("myCanvas");
  var context = canvas.getContext("2d");
  // load image from data url
  var imageObj = new Image();
  
  
  
  imageObj.onload = function()
  {
		context.drawImage(this, 0, 0);
		
		//pintar imagen
		
		var canvas1 = document.getElementById("myCanvasP");
		var context1 = canvas1.getContext("2d");
	   
		var rectangle = new Rectangle(0,0,200,300);
		var f = new MyPoint(50,50);
	   
		var data = context.getImageData(0,0,this.width,this.height);
		
		var dataToModify = context1.getImageData(0,0,2*this.width,2*this.height);
      
        var h = 2*this.height;
        var w = 2*this.width;
      
        //alert(this.width.toString() + " " + this.height.toString())
	   
		for(var i = 0; i < this.width ; i++)
			for(var j = 0; j < this.height ; j++)
			{
				var x = i*rectangle.Width/this.width;
				var y = j*rectangle.Height/this.height;
                //alert('sdfkj');

				var m = new MyPoint(x - rectangle.Width/2, rectangle.Height/2  - y , 0);

				Rotar(10, -40, -5, m);

				//Pen p = new Pen(Bitmap.GetPixel(i, j));
				//g.DrawLine(p, (float) (f.X + m.X), (float) (f.Y + m.Y), (float) (f.X + m.X), (float) (f.Y + m.Y));
				
				r = data[i*this.width + j];
				g = data[i*this.width + j + 1];
				b = data[i*this.width + j + 2];
				
				//g.FillEllipse(b, (float)(f.X + m.X + Rectangle.Width / 2f), (float)(f.Y - m.Y + Rectangle.Height / 2f), 2, 2);
				
				dataToModify[ Math.round(f.X + m.X + rectangle.Width / 2)*w + Math.round(f.Y - m.Y + Rectangle.Height / 2)] = r;
                dataToModify[ Math.round(f.X + m.X + rectangle.Width / 2)*w + Math.round(f.Y - m.Y + Rectangle.Height / 2) + 1] = g;
                dataToModify[ Math.round(f.X + m.X + rectangle.Width / 2)*w + Math.round(f.Y - m.Y + Rectangle.Height / 2) + 2] = b;
                
                context1.putImageData(dataToModify, 0,0);
			}
	
  };
   
   imageObj.src = './Images/libro.PNG';

};

window.onload = function()
{
   //draw();
};


</script>

</head>
	<canvas id="myCanvas" width="600" height="600" style="border:1px solid black;">
    
	</canvas>
	
	<canvas id="myCanvasP" width="600" height="600" style="border:1px solid black;">
    
	</canvas>
	
	<img image src="./Images/libro.PNG"/>

    <script type="text/javascript" src= "./Js/rectangle.js"></script> 	
    <script type="text/javascript" src= "./Js/mypoint.js"></script> 
    <script type="text/javascript" src= "./Js/canvas.js"></script>  

    </body>
</html>